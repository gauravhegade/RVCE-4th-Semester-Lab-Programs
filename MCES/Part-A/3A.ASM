	AREA RESET, CODE
	ENTRY
	
	; COMPUTE AVERAGE N-32 BIT NUMBERS IN A LIST

	MOV R3, #COUNT	; NO. OF LIST ELEMENTS
	MOV R4, #0		; SUM VARIABLE
	LDR R0, =INPUT	; INPUT LIST
	LDR R1, =OUTPUT	; OUTPUT LOCATION
	
LOOP1
	LDR R2, [R0], #4	; ITERATE THROUGH EACH LIST ELEMENT
	ADD R4, R2			; ADD EVERY ELEMENT
	SUBS R3, #1			; DECREMENT LOOP COUNTER
	BNE LOOP1			; BRANCH UNTIL COUNT BECOMES 0
	
	MOV R3, #0		; NO. OF SUBTRACTIONS PERFORMED (QUOTIENT)
	MOV R2, #COUNT	; NO. OF LIST ELEMENTS
	
LOOP2
	SUBS R4, R2		; (TOTAL SUM - COUNT), SET FLAGS
	ADDPL R3, #1	; INCREMENT SUBTRACTION COUNT UNTIL RESULT OF PREVIOUS INST. IS POSITIVE, TO GET QUOTIENT
	BPL LOOP2
	
	ADDMI R4, R2	; IF THE RESULT IS NEGATIVE ADD COUNT ONCE
	STR R3, [R1]	; STORE THE QUOTIENT
	
STOP B STOP

COUNT EQU 5
INPUT DCD 01, 02, 03, 04, 05

	AREA MEMORY, DATA
OUTPUT SPACE 4
	END